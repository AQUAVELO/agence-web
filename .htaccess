<IfModule mod_rewrite.c>
    Options -MultiViews
    RewriteEngine On
    RewriteBase /

    # 1. Laisser l'accès direct aux fichiers réels (inclut votre dossier /cloud)
    # Très important pour que le FS Bucket fonctionne
    RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]

    # 2. Rediriger les anciens fichiers .php vers les versions sans extension (SEO)
    RewriteRule ^(vente_formule|vente_cryo|vente_prix|vente_prixprod|vente_cryoprod)\.php$ $1 [R=301,L]

    # 3. Routes personnalisées vers index.php
    RewriteRule ^vente_formule/?$ index.php?p=vente_formule [QSA,L]
    RewriteRule ^vente_cryo/?$ index.php?p=vente_cryo [QSA,L]
    RewriteRule ^vente_prix/?$ index.php?p=vente_prix [QSA,L]
    RewriteRule ^vente_prixprod/?$ index.php?p=vente_prixprod [QSA,L]
    RewriteRule ^vente_cryoprod/?$ index.php?p=vente_cryoprod [QSA,L]
    RewriteRule ^inscription/?$ index.php?p=vente_formule [QSA,L]
    
    # Centres et Villes
    RewriteRule ^centres/([^/]+)/?$ index.php?p=page&city=$1 [QSA,L]
    RewriteRule ^centres/?$ index.php?p=centers [QSA,L]

    # Autres pages
    RewriteRule ^(aquabiking|contact|free|franchise|conseilminceur|cryolipolyse)/?$ index.php?p=$1 [QSA,L]

</IfModule>

ErrorDocument 404 /index.php
